<!DOCTYPE html>
<html lang="en">

<head>
  <!--Link to Knewave font-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,100..900;1,9..144,100..900&family=Knewave&display=swap" rel="stylesheet">
  
  <title>Home Page</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <div id="container">
    <header style="display: inline-block;">
      <a href="index.html"><img src="images/logo.png" alt="Munky Bizness logo"></a>
    </header>

    <nav>
      <ul>
        <li style="float:right;"> <a href="login.html">SIGN IN</a></li>
        <li style="float:right;"><a href="create_event.html">CREATE MY EVENT</a></li>
      </ul>
    </nav>

    <main>
      <div class="wrapper">
        <div class="container-calendar">
          <div id="center">
            <h1 class="calendarCenter">Event Calendar</h1>
          </div>
          <div id="right">
            <div class="calendarCenter">
              <label for="month">Jump To: </label>
              <!-- Dropdowns to select a specific month and year -->
              <select id="month">
                <option value=0>Jan</option>
                <option value=1>Feb</option>
                <option value=2>Mar</option>
                <option value=3>Apr</option>
                <option value=4>May</option>
                <option value=5>Jun</option>
                <option value=6>Jul</option>
                <option value=7>Aug</option>
                <option value=8>Sep</option>
                <option value=9>Oct</option>
                <option value=10>Nov</option>
                <option value=11>Dec</option>
              </select>
              <!-- Dropdown to select a specific year -->
              <select id="year" onchange=""></select>
            </div>
            <h3 class="calendarCenter" id="monthAndYear"></h3>
            <div class="calendarCenter">
              <button class="calendarCenter" id="previous">
                ‹
              </button>
              <button class="calendarCenter" id="next">›</button>
            <table class="table-calendar"
              id="calendar"
              data-lang="en">
              <thead id="thead-month"></thead>
              <!-- Table body for displaying the calendar -->
              <tbody id="calendar-body"></tbody>
            </table>
          </div>
        </div>
      </div>

    </main>
  </div>
  <script type="module">
  const createYear = generate_year_range(1970, 2050);
  document.getElementById("year").innerHTML = createYear;
  
  function generate_year_range(start, end) {
    let years = "";
    for (let year = start; year <= end; year++) {
        years += "<option value='" + year + "'>" + year + "</option>";
    }
    return years;
  }
  let currentDate = new Date();
  const dateInput = document.getElementById('dateInput');
  const calendarDiv = document.getElementById('calendar');

  function generateCalendar() {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    const firstDayOfMonth = new Date(year, month, 1);
    const lastDayOfMonth = new Date(year, month + 1, 0);
    const daysInMonth = lastDayOfMonth.getDate();
    const startingDay = firstDayOfMonth.getDay(); // 0 (Sunday) to 6 (Saturday)

    let table = '<table>';
    table += '<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>';

    let dayCounter = 1;

    for (let i = 0; i < 6; i++) { // Up to 6 weeks in a month
      table += '<tr>';
      for (let j = 0; j < 7; j++) {
        if (i === 0 && j < startingDay) {
          table += '<td></td>'; // Empty cells before the first day
        } else if (dayCounter <= daysInMonth) {
          const isToday = (
            currentDate.getDate() === dayCounter &&
            currentDate.getMonth() === new Date().getMonth() &&
            currentDate.getFullYear() === new Date().getFullYear()
          );
          const todayClass = isToday ? ' class="today"' : '';
          table += '<td' + todayClass + '>' + dayCounter + '</td>';
          dayCounter++;
        } else {
          table += '<td></td>'; // Empty cells after the last day
        }
      }
      table += '</tr>';
      if (dayCounter > daysInMonth) {
        break; // Stop if all days are rendered
      }
    }
    table += '</table>';
    calendarDiv.innerHTML = table;
    dateInput.value = formatDate(String(year) + String(month) + String(1));
  }

  function changeMonth(change) {
    currentDate.setMonth(currentDate.getMonth() + change);
    generateCalendar();
  }

  function setDate() {
     const newDate = new Date(dateInput.value);
    if (!isNaN(newDate)) {
      currentDate = newDate;
      generateCalendar();
    } else {
      alert("Invalid date format. Please use YYYY-MM-DD.");
    }
  }

  function formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
  }
  generateCalendar();

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js";
    app.use(cors());  
    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCFcAzIbkyu33GuRAS_oYtc6IUlmxqFEdM",
        authDomain: "evnt-320a0.firebaseapp.com",
        projectId: "evnt-320a0",
        storageBucket: "evnt-320a0.firebasestorage.app",
        messagingSenderId: "146980889296",
        appId: "1:146980889296:web:85312e3d4a0c3f396d74d5"
    };

      
   const changeDate = document.getElementById("month");
    changeDate.addEventListener("change", changeMonth());
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    // Get Firestore instance
    const db = getFirestore(app);
  </script>

</body>

</html>